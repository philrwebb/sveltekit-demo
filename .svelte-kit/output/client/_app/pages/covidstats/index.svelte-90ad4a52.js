import{C as e,S as t,i as a,s as o,l as r,f as s,r as n,u as l,v as c,d as i,M as d,B as u,e as h,t as f,c as m,a as p,g as v,F as w,H as C,b as g,k as D,j as $,n as y,m as b,o as N,J as T,h as E,w as R}from"../../chunks/vendor-e46ca3cc.js";import{L as S}from"../../chunks/list-303a8b29.js";function G(t){const a=e(t);return a.request=async(e,t,o=null)=>{a.update((e=>(delete e.errors,e.loading=!0,e)));const r=o?JSON.stringify(o):void 0,s=await fetch(t,{method:e,body:r,headers:{"Content-type":"application/json"}}),n=await s.json();s.ok?a.set(n):a.update((e=>(e.loading=!1,e.errors=n.errors,e)))},a.get=e=>a.request("GET",e),a.post=(e,t)=>a.request("POST",e,t),a.patch=(e,t)=>a.request("PATCH",e,t),a.delete=(e,t)=>a.request("DELETE",e,t),a}function k(e){let t,a;return{c(){t=h("p"),a=f("loading . . .")},l(e){t=m(e,"P",{});var o=p(t);a=v(o,"loading . . ."),o.forEach(i)},m(e,o){s(e,t,o),w(t,a)},p:C,i:C,o:C,d(e){e&&i(t)}}}function j(e){let t,a,o,r;const d=[I,q],f=[];function v(e,t){return e[0]?1:0}return a=v(e),o=f[a]=d[a](e),{c(){t=h("div"),o.c(),this.h()},l(e){t=m(e,"DIV",{class:!0});var a=p(t);o.l(a),a.forEach(i),this.h()},h(){g(t,"class","resultscontainer svelte-95r47l")},m(e,o){s(e,t,o),f[a].m(t,null),r=!0},p(e,r){let s=a;a=v(e),a===s?f[a].p(e,r):(u(),n(f[s],1,1,(()=>{f[s]=null})),l(),o=f[a],o?o.p(e,r):(o=f[a]=d[a](e),o.c()),c(o,1),o.m(t,null))},i(e){r||(c(o),r=!0)},o(e){n(o),r=!1},d(e){e&&i(t),f[a].d()}}}function q(e){let t,a,o=e[2]&&e[2].length>0&&H(e);return{c(){o&&o.c(),t=r()},l(e){o&&o.l(e),t=r()},m(e,r){o&&o.m(e,r),s(e,t,r),a=!0},p(e,a){e[2]&&e[2].length>0?o?(o.p(e,a),4&a&&c(o,1)):(o=H(e),o.c(),c(o,1),o.m(t.parentNode,t)):o&&(u(),n(o,1,1,(()=>{o=null})),l())},i(e){a||(c(o),a=!0)},o(e){n(o),a=!1},d(e){o&&o.d(e),e&&i(t)}}}function I(e){let t,a,o,r,l,d;return l=new S({props:{rowdata:e[1],headerdata:e[3],sortCol:"0"}}),l.$on("rowSelected",e[8]),{c(){t=h("div"),a=h("h1"),o=f("Country Data - click on any row for\n                                        detailed data"),r=D(),$(l.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var s=p(t);a=m(s,"H1",{});var n=p(a);o=v(n,"Country Data - click on any row for\n                                        detailed data"),n.forEach(i),r=y(s),b(l.$$.fragment,s),s.forEach(i),this.h()},h(){g(t,"class","rowdata")},m(e,n){s(e,t,n),w(t,a),w(a,o),w(t,r),N(l,t,null),d=!0},p(e,t){const a={};2&t&&(a.rowdata=e[1]),8&t&&(a.headerdata=e[3]),l.$set(a)},i(e){d||(c(l.$$.fragment,e),d=!0)},o(e){n(l.$$.fragment,e),d=!1},d(e){e&&i(t),R(l)}}}function H(e){let t,a,o,r,l,d,u,C,G,k,j,q,I,H=e[5][0].Country+"";return k=new S({props:{rowdata:e[2],headerdata:e[4],sortCol:"6"}}),{c(){t=h("div"),a=h("div"),o=h("h1"),r=f("Detail Data about "),l=f(H),d=D(),u=h("button"),C=f("Return to Country\n                                                        Summary"),G=D(),$(k.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var s=p(t);a=m(s,"DIV",{class:!0});var n=p(a);o=m(n,"H1",{});var c=p(o);r=v(c,"Detail Data about "),l=v(c,H),c.forEach(i),d=y(n),u=m(n,"BUTTON",{class:!0});var h=p(u);C=v(h,"Return to Country\n                                                        Summary"),h.forEach(i),n.forEach(i),G=y(s),b(k.$$.fragment,s),s.forEach(i),this.h()},h(){g(u,"class","svelte-95r47l"),g(a,"class","header svelte-95r47l"),g(t,"class","detailrowdata")},m(n,c){s(n,t,c),w(t,a),w(a,o),w(o,r),w(o,l),w(a,d),w(a,u),w(u,C),w(t,G),N(k,t,null),j=!0,q||(I=T(u,"click",e[9]),q=!0)},p(e,t){(!j||32&t)&&H!==(H=e[5][0].Country+"")&&E(l,H);const a={};4&t&&(a.rowdata=e[2]),16&t&&(a.headerdata=e[4]),k.$set(a)},i(e){j||(c(k.$$.fragment,e),j=!0)},o(e){n(k.$$.fragment,e),j=!1},d(e){e&&i(t),R(k),q=!1,I()}}}function O(e){let t,a,o,d;const h=[j,k],f=[];function m(e,t){return e[6].Countries&&e[6].Global?0:1}return t=m(e),a=f[t]=h[t](e),{c(){a.c(),o=r()},l(e){a.l(e),o=r()},m(e,a){f[t].m(e,a),s(e,o,a),d=!0},p(e,[r]){let s=t;t=m(e),t===s?f[t].p(e,r):(u(),n(f[s],1,1,(()=>{f[s]=null})),l(),a=f[t],a?a.p(e,r):(a=f[t]=h[t](e),a.c()),c(a,1),a.m(o.parentNode,o))},i(e){d||(c(a),d=!0)},o(e){n(a),d=!1},d(e){f[t].d(e),e&&i(o)}}}function V(e,t,a){let o,r,s,n,l,c,i;const u=G({});d(e,u,(e=>a(6,i=e)));const h=G([]);return h.subscribe((e=>{if(e.length&&e.length>0){a(0,o=!0),a(2,s=[]);let t=0,r=0;e.forEach((e=>{s.push([e.Confirmed,e.Confirmed-r,e.Deaths,e.Deaths-t,e.Recovered,e.Active,new Date(e.Date).toISOString().slice(0,10)]),t=e.Deaths,r=e.Confirmed})),s.sort(((e,t)=>e[6]<e[6]?1:-1)),a(4,l=["Confirmed","New Confirmed","Deaths","New Deaths","Recovered","Active","Date"])}})),u.subscribe((e=>{e.Global&&(a(1,r=[]),a(3,n=["Country","New Confirmed","Total Confirmed","New Deaths","Total Deaths","New Recovered","Total Recovered"]),r.push(["World",e.Global.NewConfirmed,e.Global.TotalConfirmed,e.Global.NewDeaths,e.Global.TotalDeaths,e.Global.NewRecovered,e.Global.TotalRecovered]),e.Countries.forEach((e=>{r.push([e.Country,e.NewConfirmed,e.TotalConfirmed,e.NewDeaths,e.TotalDeaths,e.NewRecovered,e.TotalRecovered])})))})),u.get("https://api.covid19api.com/summary"),a(0,o=!1),a(1,r=[]),a(2,s=[]),a(3,n=[]),a(4,l=[]),a(5,c=[]),[o,r,s,n,l,c,i,u,function(e){let t=e.detail.rowvalue[0];e.detail.rowno>0&&(a(5,c=i.Countries.filter((e=>e.Country===t))),1==c.length&&(console.log(c[0].Slug),h.get(`https://api.covid19api.com/total/country/${c[0].Slug}`)))},function(){o&&a(2,s=[]),a(0,o=!o)}]}export default class extends t{constructor(e){super(),a(this,e,V,O,o,{})}}
