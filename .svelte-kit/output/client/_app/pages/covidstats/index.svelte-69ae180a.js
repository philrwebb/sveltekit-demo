import{C as t,S as e,i as a,s as o,l as r,f as s,r as n,u as l,v as c,d as i,M as d,B as u,e as h,t as f,c as m,a as p,g as v,F as w,H as C,b as g,k as D,j as $,n as b,m as y,o as N,J as T,h as E,w as R}from"../../chunks/vendor-0a5d2115.js";import{L as S}from"../../chunks/list-c45b329b.js";function G(e){const a=t(e);return a.request=async(t,e,o=null)=>{a.update((t=>(delete t.errors,t.loading=!0,t)));const r=o?JSON.stringify(o):void 0,s=await fetch(e,{method:t,body:r,headers:{"Content-type":"application/json"}}),n=await s.json();s.ok?a.set(n):a.update((t=>(t.loading=!1,t.errors=n.errors,t)))},a.get=t=>a.request("GET",t),a.post=(t,e)=>a.request("POST",t,e),a.patch=(t,e)=>a.request("PATCH",t,e),a.delete=(t,e)=>a.request("DELETE",t,e),a}function k(t){let e,a;return{c(){e=h("p"),a=f("loading . . .")},l(t){e=m(t,"P",{});var o=p(e);a=v(o,"loading . . ."),o.forEach(i)},m(t,o){s(t,e,o),w(e,a)},p:C,i:C,o:C,d(t){t&&i(e)}}}function j(t){let e,a,o,r;const d=[I,q],f=[];function v(t,e){return t[0]?1:0}return a=v(t),o=f[a]=d[a](t),{c(){e=h("div"),o.c(),this.h()},l(t){e=m(t,"DIV",{class:!0});var a=p(e);o.l(a),a.forEach(i),this.h()},h(){g(e,"class","resultscontainer svelte-95r47l")},m(t,o){s(t,e,o),f[a].m(e,null),r=!0},p(t,r){let s=a;a=v(t),a===s?f[a].p(t,r):(u(),n(f[s],1,1,(()=>{f[s]=null})),l(),o=f[a],o?o.p(t,r):(o=f[a]=d[a](t),o.c()),c(o,1),o.m(e,null))},i(t){r||(c(o),r=!0)},o(t){n(o),r=!1},d(t){t&&i(e),f[a].d()}}}function q(t){let e,a,o=t[2]&&t[2].length>0&&H(t);return{c(){o&&o.c(),e=r()},l(t){o&&o.l(t),e=r()},m(t,r){o&&o.m(t,r),s(t,e,r),a=!0},p(t,a){t[2]&&t[2].length>0?o?(o.p(t,a),4&a&&c(o,1)):(o=H(t),o.c(),c(o,1),o.m(e.parentNode,e)):o&&(u(),n(o,1,1,(()=>{o=null})),l())},i(t){a||(c(o),a=!0)},o(t){n(o),a=!1},d(t){o&&o.d(t),t&&i(e)}}}function I(t){let e,a,o,r,l,d;return l=new S({props:{rowdata:t[1],headerdata:t[3],sortCol:"0"}}),l.$on("rowSelected",t[8]),{c(){e=h("div"),a=h("h1"),o=f("Country Data - click on any row for\n                                        detailed data"),r=D(),$(l.$$.fragment),this.h()},l(t){e=m(t,"DIV",{class:!0});var s=p(e);a=m(s,"H1",{});var n=p(a);o=v(n,"Country Data - click on any row for\n                                        detailed data"),n.forEach(i),r=b(s),y(l.$$.fragment,s),s.forEach(i),this.h()},h(){g(e,"class","rowdata")},m(t,n){s(t,e,n),w(e,a),w(a,o),w(e,r),N(l,e,null),d=!0},p(t,e){const a={};2&e&&(a.rowdata=t[1]),8&e&&(a.headerdata=t[3]),l.$set(a)},i(t){d||(c(l.$$.fragment,t),d=!0)},o(t){n(l.$$.fragment,t),d=!1},d(t){t&&i(e),R(l)}}}function H(t){let e,a,o,r,l,d,u,C,G,k,j,q,I,H=t[5][0].Country+"";return k=new S({props:{rowdata:t[2],headerdata:t[4],sortCol:"6"}}),{c(){e=h("div"),a=h("div"),o=h("h1"),r=f("Detail Data about "),l=f(H),d=D(),u=h("button"),C=f("Return to Country\n                                                        Summary"),G=D(),$(k.$$.fragment),this.h()},l(t){e=m(t,"DIV",{class:!0});var s=p(e);a=m(s,"DIV",{class:!0});var n=p(a);o=m(n,"H1",{});var c=p(o);r=v(c,"Detail Data about "),l=v(c,H),c.forEach(i),d=b(n),u=m(n,"BUTTON",{class:!0});var h=p(u);C=v(h,"Return to Country\n                                                        Summary"),h.forEach(i),n.forEach(i),G=b(s),y(k.$$.fragment,s),s.forEach(i),this.h()},h(){g(u,"class","svelte-95r47l"),g(a,"class","header svelte-95r47l"),g(e,"class","detailrowdata")},m(n,c){s(n,e,c),w(e,a),w(a,o),w(o,r),w(o,l),w(a,d),w(a,u),w(u,C),w(e,G),N(k,e,null),j=!0,q||(I=T(u,"click",t[9]),q=!0)},p(t,e){(!j||32&e)&&H!==(H=t[5][0].Country+"")&&E(l,H);const a={};4&e&&(a.rowdata=t[2]),16&e&&(a.headerdata=t[4]),k.$set(a)},i(t){j||(c(k.$$.fragment,t),j=!0)},o(t){n(k.$$.fragment,t),j=!1},d(t){t&&i(e),R(k),q=!1,I()}}}function O(t){let e,a,o,d;const h=[j,k],f=[];function m(t,e){return t[6].Countries&&t[6].Global?0:1}return e=m(t),a=f[e]=h[e](t),{c(){a.c(),o=r()},l(t){a.l(t),o=r()},m(t,a){f[e].m(t,a),s(t,o,a),d=!0},p(t,[r]){let s=e;e=m(t),e===s?f[e].p(t,r):(u(),n(f[s],1,1,(()=>{f[s]=null})),l(),a=f[e],a?a.p(t,r):(a=f[e]=h[e](t),a.c()),c(a,1),a.m(o.parentNode,o))},i(t){d||(c(a),d=!0)},o(t){n(a),d=!1},d(t){f[e].d(t),t&&i(o)}}}function V(t,e,a){let o,r,s,n,l,c,i;const u=G({});d(t,u,(t=>a(6,i=t)));const h=G([]);return h.subscribe((t=>{if(t.length&&t.length>0){a(0,o=!0),a(2,s=[]);let e=0,r=0;t.forEach((t=>{s.push([t.Confirmed,t.Confirmed-r,t.Deaths,t.Deaths-e,t.Recovered,t.Active,new Date(t.Date).toISOString().slice(0,10)]),e=t.Deaths,r=t.Confirmed})),s.sort(((t,e)=>t[6]<t[6]?1:-1)),a(4,l=["Confirmed","New Confirmed","Deaths","New Deaths","Recovered","Active","Date"])}})),u.subscribe((t=>{t.Global&&(a(1,r=[]),a(3,n=["Country","New Confirmed","Total Confirmed","New Deaths","Total Deaths","New Recovered","Total Recovered"]),r.push(["World",t.Global.NewConfirmed,t.Global.TotalConfirmed,t.Global.NewDeaths,t.Global.TotalDeaths,t.Global.NewRecovered,t.Global.TotalRecovered]),t.Countries.forEach((t=>{r.push([t.Country,t.NewConfirmed,t.TotalConfirmed,t.NewDeaths,t.TotalDeaths,t.NewRecovered,t.TotalRecovered])})))})),u.get("https://api.covid19api.com/summary"),a(0,o=!1),a(1,r=[]),a(2,s=[]),a(3,n=[]),a(4,l=[]),a(5,c=[]),[o,r,s,n,l,c,i,u,function(t){let e=t.detail.rowvalue[0];t.detail.rowno>0&&(a(5,c=i.Countries.filter((t=>t.Country===e))),1==c.length&&(console.log(c[0].Slug),h.get(`https://api.covid19api.com/total/country/${c[0].Slug}`)))},function(){o&&a(2,s=[]),a(0,o=!o)}]}export default class extends e{constructor(t){super(),a(this,t,V,O,o,{})}}
